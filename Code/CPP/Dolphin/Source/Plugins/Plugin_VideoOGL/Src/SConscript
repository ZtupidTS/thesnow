# -*- python -*-

Import('env')
import os
import sys

name = os.sep + "Plugin_VideoOGL"

files = [
	'BPFunctions.cpp',
	'DLCache.cpp',
	'RasterFont.cpp',
	'Render.cpp',
	'TextureMngr.cpp',
	'NativeVertexFormat.cpp',
	'PixelShaderCache.cpp',
	'VertexShaderCache.cpp',
	'TextureConverter.cpp',
	'VertexManager.cpp',
	'XFB.cpp',
	'PostProcessing.cpp',
	'FramebufferManager.cpp',
	'main.cpp',
	'GLUtil.cpp'
	]

libs = [ 'videocommon', 'GLEW', 'SOIL', 'common' ]

if env['HAVE_WX']:
	files += [
		'GUI/ConfigDlg.cpp',
		'Debugger/Debugger.cpp',
		]

if sys.platform == 'darwin' and not env['HAVE_WX']:
	files += [ 'cocoaGL.m' ]
elif sys.platform == 'win32':
	files += [ 'OS/Win32.cpp' ]
elif not sys.platform == 'darwin' and env['HAVE_OPENCL']:
	libs += [ 'OpenCL' ]

env.SharedLibrary(env['plugin_dir'] + name, files, LIBS = env['LIBS'] + libs)
