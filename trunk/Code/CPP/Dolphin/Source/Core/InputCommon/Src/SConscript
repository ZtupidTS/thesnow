# -*- python -*-
import sys
Import('env')
icenv = env.Clone()

files = [
	'Configuration.cpp',
	'EventHandler.cpp',
	'InputCommon.cpp',
	'SDL_Util.cpp',
	'ControllerInterface/ControllerInterface.cpp',
	]

if env['HAVE_X11']:
	files += [
		"X11InputBase.cpp",
		]

if env['HAVE_WX']:
	files += [
		"WXInputBase.cpp",
		]

if icenv['HAVE_SDL']:
	files += [
		'ControllerInterface/SDL/SDL.cpp'
		]
	
if sys.platform == 'darwin':
	files += [
		'ControllerInterface/OSX/OSX.mm',
		'ControllerInterface/OSX/OSXKeyboard.mm',
		'ControllerInterface/OSX/OSXMouse.mm'
		]
	icenv['FRAMEWORKS'] = ['IOKit']
		   
if sys.platform == 'linux2':
	files += [
		'ControllerInterface/Xlib/Xlib.cpp'
		]

icenv.Append(CXXFLAGS = [ '-fPIC' ])
icenv.StaticLibrary(env['local_libs'] + "inputcommon", files)
